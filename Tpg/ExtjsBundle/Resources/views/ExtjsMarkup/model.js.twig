Ext.define("{{ name }}", {
    extend: "{{ extend }}",
    uses: [
        {%- for assoc in associations %}

        '{{ assoc.model }}'
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    fields: [
        {%-for field in fields %}

        { name: "{{ field.name }}", type: "{{ field.type }}" }
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    validations: [
        {%-for validator in validators %}

        {

            {%- for key,value in validator %}
            {%- if value.skipEncode %}

            {{ key }}: {{ value.value|raw }}
            {%- else %}

            {{ key }}: {{ value|json_encode()|raw }}
            {%- endif %}
            {%- if not loop.last %},{% endif %}
            {%- endfor %}

        }
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    associations: [
        {%- for assoc in associations %}

        {
            {%- if assoc.type == "OneToMany" %}

            type: 'hasMany',
            model: '{{ assoc.model }}',
            name: '{{ assoc.name }}',
            foreignKey: '{{ assoc.key }}'

            {%- elseif assoc.type == "ManyToOne" %}

            type: 'belongsTo',
            model: '{{ assoc.model }}',
            getterName: 'get{{ assoc.name|capitalize }}',
            setterName: 'set{{ assoc.name|capitalize }}',
            foreignKey: '{{ assoc.key }}'

            {%- elseif assoc.type == "OneToOne" %}

            type: 'hasOne',
            model: '{{ assoc.model }}',
            getterName: 'get{{ assoc.name|capitalize }}',
            setterName: 'set{{ assoc.name|capitalize }}',
            foreignKey: '{{ assoc.key }}'

            {%- endif %}

        }
        {%- if not loop.last %},{% endif %}

        {%- endfor %}

    ],
    {%- if proxy %}

    proxy: {{ proxy|json_encode|raw }}

    {%- else %}

    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'data'
        }
    }

    {%- endif %}

});
